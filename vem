#!/bin/bash

# vem's main code

# Check for updates
repo=$(find $HOME -type d -name vem)

[ ! -d ~/.vem ] && $repo/install
if [[ `diff $repo/.vem/.lib ~/.vem/.lib` || `diff $repo/.vem/help ~/.vem/help` || `diff $repo/.vem/version ~/.vem/version` || `diff $repo/vem ~/bin/vem` ]]; then echo "Updating vem..."; $(find $HOME -type d -name vem)/install; fi

# Load lib
source $HOME/.vem/.lib

__vem() {
  # Parse args
  [ "$1" == "" ] && ( cat $HOME/.vem/help | head -1; exit ) || __args $@
}

__vem $@

# Cleanup for accidental sourcing
unset __vem __args __cwd __cwvem __setve __repo __del __delve arg
